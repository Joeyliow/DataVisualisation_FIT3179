{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "vconcat": [
      {
        "hconcat": [
          {
            "title": "Radar Plot: Crop Production by Country",
            "data": {
              "url": "agriculture_productivity_by_country_year.csv",
              "format": {"type": "csv"}
            },
            "params": [
              {
                "name": "Crop_Type_Selection",
                "select": {
                  "type": "point",
                  "fields": ["Crop_Type"]
                },
                "bind": {
                  "input": "select",
                  "options": [
                    "Wheat", "Corn", "Rice", "Soybeans", "Sugarcane", "Barley", "Fruits", "Coffee", "Cotton", "Vegetables"
                  ],
                  "name": "Select Crop Type: "
                }
              },
              {
                "name": "Year_Selection",
                "select": {
                  "type": "point",
                  "fields": ["Year"]
                },
                "bind": {
                  "input": "select",
                  "options": [
                    1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,
                    2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021,
                    2022, 2023
                  ],
                  "name": "Select Year: "
                }
              }
            ],
            "transform": [
              {
                "filter": {"param": "Crop_Type_Selection"}
              },
              {
                "filter": {"param": "Year_Selection"}
              }
            ],
            "layer": [
              {
                "mark": {"type": "arc", "innerRadius": 20, "stroke": "#fff"}
              },
              {
                "mark": {
                  "type": "text",
                  "radiusOffset": 40,
                  "color": "black",
                  "fontSize": 12,
                  "align": "center"
                },
                "encoding": {
                  "text": {"field": "Country", "type": "nominal"}
                }
              }
            ],
            "encoding": {
              "theta": {
                "field": "Crop_Yield_MT_per_HA",
                "type": "quantitative",
                "stack": true
              },
              "radius": {
                "field": "Crop_Yield_MT_per_HA",
                "scale": {"type": "sqrt", "zero": true, "rangeMin": 20}
              },
              "color": {
                "field": "Country",
                "type": "nominal",
                "legend": {"title": "Country"}
              },
              "tooltip": [
                {"field": "Country", "type": "nominal", "title": "Country"},
                {"field": "Crop_Type", "type": "nominal", "title": "Crop Type"},
                {"field": "Crop_Yield_MT_per_HA", "type": "quantitative", "title": "Crop Yield (MT/HA)"}
              ]
            },
            "config": {
              "view": {
                "stroke": "transparent",
                "continuousWidth": 400,
                "continuousHeight": 400,
                "padding": {"left": 40, "right": 40, "top": 20, "bottom": 20}
              },
              "title": {"font": "sans-serif", "fontSize": 14},
              "autosize": {
                "type": "pad",
                "contains": "padding"
              }
            }
          },
          {
            "width": 1500,
            "height": 400,
            "title": "Crop Production Over Time by Crop Type",
            "data": {
              "url": "agriculture_productivity_by_country_year.csv",
              "format": {"type": "csv"}
            },
            "transform": [
              {
                "filter": {"param": "brush"}
              }
            ],
            "mark": {
              "type": "area",
              "line": true,
              "point": true
            },
            "encoding": {
              "x": {
                "field": "Year",
                "type": "temporal",
                "axis": {
                  "title": "Year",
                  "format": "%Y",
                  "tickCount": 24
                }
              },
              "y": {
                "field": "Crop_Yield_MT_per_HA",
                "type": "quantitative",
                "aggregate": "sum",
                "title": "Total Crop Yield"
              },
              "color": {
                "field": "Crop_Type",
                "type": "nominal"
              },
              "tooltip": [
                {"field": "Year", "type": "temporal", "title": "Year"},
                {"field": "Crop_Type", "type": "nominal", "title": "Crop Type"},
                {
                  "field": "Crop_Yield_MT_per_HA",
                  "type": "quantitative",
                  "title": "Crop Yield (MT/HA)",
                  "aggregate": "sum"
                }
              ]
            }
          }
        ]
      },
      {
        "width": 1500,
        "height": 100,
        "mark": "line",
        "title": "Filter Crop Production by Year",
        "params": [
          {
            "name": "brush",
            "select": {
              "type": "interval",
              "encodings": ["x"]
            }
          }
        ],
        "data": {
          "url": "agriculture_total_productivity_year.csv",
          "format": {"type": "csv"}
        },
        "encoding": {
          "x": {
            "field": "Year",
            "type": "temporal",
            "axis": {
              "title": "Year",
              "format": "%Y",
              "tickCount": 24
            }
          },
          "y": {
            "aggregate": "sum",
            "field": "Crop_Yield_MT_per_HA",
            "type": "quantitative",
            "axis": {"title": "Total Crop Yield"}
          }
        }
      }
    ],
    "config": {
      "title": {"font": "sans-serif", "fontSize": 14}
    }
  }